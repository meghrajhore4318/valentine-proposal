<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Will you be my Valentine?</title>
  <meta name="description" content="A special Valentine proposal ‚Äî made with ‚ù§Ô∏è" />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Montserrat:wght@300;500;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1: #ff9a9e;
      --bg2: #fad0c4;
      --card-bg: rgba(255,255,255,0.12);
      --glass-border: rgba(255,255,255,0.18);
      --accent: #ff4d6d;
      --accent-2: #ff7aa2;
      --text-light: #fff;
      --text-dark: #1b1222;
      --radius: 18px;
      --accent-glow: rgba(255,77,109,0.22);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: "Montserrat", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color:var(--text-dark);
      background: radial-gradient(1200px 600px at 10% 10%, rgba(255,255,255,0.06), transparent),
                  linear-gradient(135deg,var(--bg1),var(--bg2));
      min-height:100vh;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
    }

    /* layout */
    .page{display:flex;flex-direction:column;align-items:center;min-height:100vh}

    /* hero */
    .hero{
      width:100%;
      min-height:78vh;
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
      padding:4rem 1rem;
      overflow:hidden;
    }

    .nav{position:absolute;top:1rem;left:1rem;display:flex;align-items:center;gap:.5rem}
    .logo{font-size:1.25rem;background:rgba(255,255,255,0.14);padding:.45rem .85rem;border-radius:999px;color:var(--text-light);backdrop-filter:blur(4px);}

    /* glass card */
    .card{
      width:min(920px,96%);
      padding:2.2rem;
      border-radius:var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.04));
      border:1px solid var(--glass-border);
      box-shadow: 0 10px 40px rgba(9,10,12,0.12);
      backdrop-filter: blur(8px) saturate(120%);
      text-align:center;
      position:relative;
      z-index:8;
      color:var(--text-light);
    }

    .title{
      font-family:"Playfair Display", serif;
      font-weight:700;
      margin:0 0 .6rem;
      font-size:clamp(2rem, 4vw, 3.4rem);
      color: #fff;
      text-shadow: 0 6px 26px rgba(0,0,0,0.35);
      letter-spacing:0.4px;
    }

    .subtitle{
      margin:0 0 1.25rem;
      color: #fff;
      opacity:.95;
      font-size:1.05rem;
      max-width:78%;
      margin-left:auto;margin-right:auto;
    }

    /* buttons */
    .actions{display:flex;gap:1rem;justify-content:center;margin-top:.9rem;flex-wrap:wrap}
    .btn{
      padding:.72rem 1.2rem;
      border-radius:12px;
      font-weight:700;
      border:0;
      cursor:pointer;
      transition:transform .14s ease, box-shadow .14s ease, opacity .14s ease;
      font-family:inherit;
      letter-spacing:.2px;
    }
    .btn:active{transform:translateY(1px)}
    .btn.primary{
      background: linear-gradient(90deg,var(--accent),var(--accent-2));
      color:#fff;
      box-shadow: 0 12px 34px var(--accent-glow);
    }
    .btn.ghost{
      background: transparent;
      color:#fff;
      border:1px solid rgba(255,255,255,0.18);
    }

    .hint{margin-top:1rem;color:rgba(255,255,255,0.9);font-size:.92rem}

    /* decorative blobs */
    .bg-blobs{
      position:absolute;inset:-10% -10% auto auto; z-index:1; filter: blur(40px); opacity:.9;
    }
    .bg-blobs svg{ width:900px; height:900px; display:block;}

    /* special section (replaces story) */
    .special{
      margin-top: -40px;
      z-index:6;
      display:flex;
      align-items:center;
      gap:2rem;
      justify-content:center;
      padding:2.4rem 1rem 4rem;
      width:100%;
    }
    .photo-wrap{
      width:220px;
      height:220px;
      border-radius:999px;
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      border: 3px solid rgba(255,255,255,0.08);
      box-shadow: 0 12px 30px rgba(0,0,0,0.18);
      display:grid;
      place-items:center;
      position:relative;
      cursor:pointer;
      overflow:hidden;
      transition: transform .18s ease, box-shadow .18s ease;
    }
    .photo-wrap:hover{ transform: translateY(-6px); box-shadow:0 20px 50px rgba(0,0,0,0.22); }
    .photo-wrap img{ width:100%; height:100%; object-fit:cover; display:block; }
    .photo-placeholder{
      color:rgba(255,255,255,0.92);
      text-align:center;
      padding:1rem;
      font-weight:600;
      font-size:.95rem;
    }
    .photo-note{ font-size:.86rem; color:rgba(255,255,255,0.88); margin-top:.6rem; text-align:center; }

    .special-card{
      width: min(520px,86%);
      padding:1.2rem 1.25rem;
      border-radius:12px;
      background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
      border:1px solid rgba(255,255,255,0.05);
      color:#fff;
      box-shadow: 0 10px 30px rgba(0,0,0,0.12);
    }
    .special-card h3{ margin:0 0 .4rem; font-family:"Playfair Display", serif; font-size:1.25rem }
    .special-card p{ margin:0 0 .6rem; opacity:.95 }

    .small-cta{ display:flex; gap:.6rem; margin-top:.4rem; flex-wrap:wrap }

    input[type="file"]{ display:none; }

    /* reveal overlay (shown after accept) */
    .reveal{
      position:fixed; inset:0; display:grid; place-items:center; z-index:120;
      background: linear-gradient(180deg, rgba(6,6,8,0.55), rgba(6,6,8,0.75));
      opacity:0; pointer-events:none; transition:opacity .22s ease;
    }
    .reveal[aria-hidden="false"]{ opacity:1; pointer-events:auto; }
    .reveal-content{
      width:min(900px,94%);
      max-width:980px;
      text-align:center;
      color:#fff;
      padding:2.2rem;
    }
    .reveal-message{
      font-family:"Playfair Display", serif;
      font-size:clamp(1.6rem, 3.8vw, 2.6rem);
      margin:0 auto 1rem;
      text-shadow: 0 8px 30px rgba(0,0,0,0.45);
      line-height:1.06;
    }
    .reveal-sub{ font-size:1.05rem; opacity:.94; margin-bottom:1rem }

    .ring-graphic{
      width:180px; height:180px; margin:1.2rem auto 0; filter: drop-shadow(0 18px 40px rgba(255,77,109,0.12)); transform-origin:center;
      transition: transform .5s cubic-bezier(.2,.9,.3,1);
    }
    .ring-graphic.burst{ transform: scale(1.08) rotate(-6deg); }

    /* floating hearts + confetti */
    .floating-heart{ position:fixed; bottom:-20px; pointer-events:none; z-index:6; will-change: transform, opacity; filter:drop-shadow(0 8px 18px rgba(0,0,0,0.18)); }
    @keyframes floatUp {
      0% { transform: translateY(0) rotate(0deg) scale(0.9); opacity:1; }
      20% { transform: translateY(-15vh) rotate(20deg) scale(1.05); opacity:1; }
      100% { transform: translateY(-120vh) rotate(420deg) scale(0.85); opacity:0; }
    }
    .confetti{ position:fixed; bottom:0; width:10px;height:14px; pointer-events:none; z-index:60; transform-origin:center; will-change: transform, opacity; }

    /* responsive */
    @media (max-width:720px){
      .special{ flex-direction:column; gap:1rem; margin-top:-8px }
      .photo-wrap{ width:180px; height:180px }
      .ring-graphic{ width:140px; height:140px }
    }

    /* accessible focus visible */
    .btn:focus { outline:3px solid rgba(255,255,255,0.12); outline-offset:3px; }
  </style>
</head>
<body>
  <main class="page">
    <div class="hero" role="banner">
      <header class="nav" aria-hidden="true">
        <div class="logo" title="Made with love">üíå</div>
      </header>

      <!-- decorative blurred blobs -->
      <div class="bg-blobs" aria-hidden="true">
        <svg viewBox="0 0 900 600" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice">
          <defs><linearGradient id="g1" x1="0" x2="1"><stop offset="0" stop-color="#fff1"/><stop offset="1" stop-color="#fff0"/></linearGradient></defs>
          <ellipse cx="220" cy="180" rx="280" ry="140" fill="url(#g1)" style="fill:rgba(255,255,255,0.06)"></ellipse>
          <ellipse cx="680" cy="420" rx="260" ry="160" fill="url(#g1)" style="fill:rgba(255,255,255,0.04)"></ellipse>
        </svg>
      </div>

      <section class="card" aria-labelledby="hero-title">
        <h1 id="hero-title" class="title">Will you be my Valentine?</h1>
        <p class="subtitle" id="lead">From the moment we met, everything felt brighter. I made this just for you ‚Äî will you share forever with me?</p>

        <div class="actions">
          <button id="proposeBtn" class="btn primary" aria-haspopup="dialog" aria-controls="proposalModal">Open the surprise</button>
          <a class="btn ghost" href="#special" style="text-decoration:none">See something special</a>
        </div>

        <p class="hint">Tip: click the photo to add your favorite picture ‚Äî it will appear during the surprise ‚ú®</p>
      </section>
    </div>

    <!-- SPECIAL SECTION: replaces the story. Click the circle to add a photo; it will appear in the final reveal. -->
    <section id="special" class="special" aria-labelledby="specialTitle">
      <div>
        <label class="photo-wrap" id="photoWrap" tabindex="0" title="Click to add a photo">
          <input type="file" id="photoInput" accept="image/*" aria-label="Upload a photo">
          <div class="photo-placeholder" id="photoPlaceholder">
            Click to add a photo<br><small style="opacity:.9;font-weight:500">(optional)</small>
          </div>
          <!-- image will be injected here if selected -->
        </label>
        <div class="photo-note" aria-hidden="true">Your photo will appear in the celebration</div>
      </div>

      <div class="special-card" aria-hidden="false">
        <h3 id="specialTitle">Something special</h3>
        <p>I've prepared a small, private reveal for us. Add a photo if you'd like ‚Äî otherwise just press "Open the surprise" and we'll begin.</p>
        <div class="small-cta">
          <button class="btn ghost" id="replacePhotoBtn" type="button">Change photo</button>
          <button class="btn ghost" id="removePhotoBtn" type="button">Remove photo</button>
        </div>
      </div>
    </section>
  </main>

  <!-- Modal -->
  <div id="proposalModal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="modalTitle">
    <div class="modal-content" role="document">
      <button class="close" id="closeModal" aria-label="Close">&times;</button>
      <h3 id="modalTitle">A question from the heart</h3>
      <p class="modal-text">Will you share forever with me? I promise love, laughter, and endless warm coffee mornings.</p>
      <div class="modal-actions">
        <button id="yesBtn" class="btn primary">Yes, forever üíç</button>
        <button id="noBtn" class="btn ghost">Let me think</button>
      </div>
    </div>
  </div>

  <!-- Reveal overlay: big typewriter message + ring + photo -->
  <div id="reveal" class="reveal" role="dialog" aria-hidden="true" aria-labelledby="revealTitle">
    <div class="reveal-content" role="document">
      <div id="revealPhotoContainer" style="width:220px;height:220px;margin:0 auto 1rem;border-radius:999px;overflow:hidden;border:4px solid rgba(255,255,255,0.08);background:linear-gradient(180deg,rgba(255,255,255,0.035),transparent)"></div>
      <h2 id="revealTitle" class="reveal-message" aria-live="polite"></h2>
      <div id="revealSub" class="reveal-sub"></div>

      <!-- ring graphic -->
      <svg id="ringGraphic" class="ring-graphic" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <defs>
          <linearGradient id="rg" x1="0" x2="1"><stop offset="0" stop-color="#fff"/><stop offset="1" stop-color="#ffd1dc"/></linearGradient>
        </defs>
        <g transform="translate(10,10) scale(0.83)">
          <path d="M50 5c17 0 30 13 30 30s-13 30-30 30-30-13-30-30S33 5 50 5z" fill="none" stroke="url(#rg)" stroke-width="6" stroke-linecap="round" />
          <path d="M50 10c10 0 18 8 18 18s-8 18-18 18-18-8-18-18 8-18 18-18z" fill="#fff7" />
          <!-- diamond -->
          <polygon points="48,4 62,16 50,28 38,16" fill="#fff" stroke="#ffd1dc" stroke-width="1" transform="translate(0,-4)"/>
        </g>
      </svg>

      <div style="height:18px"></div>
      <button class="btn primary" id="closeRevealBtn">Hold me close üíû</button>
    </div>
  </div>

  <script>
    (function(){
      // Elements
      const proposeBtn = document.getElementById('proposeBtn');
      const modal = document.getElementById('proposalModal');
      const closeModal = document.getElementById('closeModal');
      const yesBtn = document.getElementById('yesBtn');
      const noBtn = document.getElementById('noBtn');

      const photoWrap = document.getElementById('photoWrap');
      const photoInput = document.getElementById('photoInput');
      const photoPlaceholder = document.getElementById('photoPlaceholder');
      const replacePhotoBtn = document.getElementById('replacePhotoBtn');
      const removePhotoBtn = document.getElementById('removePhotoBtn');

      const reveal = document.getElementById('reveal');
      const revealTitle = document.getElementById('revealTitle');
      const revealSub = document.getElementById('revealSub');
      const revealPhotoContainer = document.getElementById('revealPhotoContainer');
      const ringGraphic = document.getElementById('ringGraphic');
      const closeRevealBtn = document.getElementById('closeRevealBtn');

      let lastFocused = null;
      let uploadedPhotoDataURL = null;

      // Modal controls
      function openModal(){
        lastFocused = document.activeElement;
        modal.setAttribute('aria-hidden','false');
        closeModal.focus();
        launchHearts(22);
      }
      function closeMainModal(){
        modal.setAttribute('aria-hidden','true');
        if(lastFocused) lastFocused.focus();
      }

      proposeBtn.addEventListener('click', openModal);
      closeModal.addEventListener('click', closeMainModal);
      noBtn.addEventListener('click', closeMainModal);

      // keyboard accessibility
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          if (reveal.getAttribute('aria-hidden') === 'false') { hideReveal(); return; }
          if (modal.getAttribute('aria-hidden') === 'false') { closeMainModal(); return; }
        }
      });

      // Photo upload handlers
      function showPhoto(dataURL){
        // remove placeholder and show image
        photoPlaceholder.style.display = 'none';
        // remove existing img if any
        const existing = photoWrap.querySelector('img');
        if (existing) existing.remove();
        const img = document.createElement('img');
        img.src = dataURL;
        img.alt = 'Your chosen photo';
        photoWrap.appendChild(img);
        uploadedPhotoDataURL = dataURL;
      }
      function removePhoto(){
        const existing = photoWrap.querySelector('img');
        if (existing) existing.remove();
        uploadedPhotoDataURL = null;
        photoPlaceholder.style.display = 'block';
      }

      // file input change
      photoInput.addEventListener('change', (e) => {
        const file = e.target.files && e.target.files[0];
        if (!file) return;
        if (!file.type.startsWith('image/')) return;
        const reader = new FileReader();
        reader.onload = function(ev){
          showPhoto(ev.target.result);
        };
        reader.readAsDataURL(file);
      });

      // clicking photoWrap opens file chooser
      photoWrap.addEventListener('click', () => photoInput.click());
      photoWrap.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); photoInput.click(); }
      });
      replacePhotoBtn.addEventListener('click', () => photoInput.click());
      removePhotoBtn.addEventListener('click', removePhoto);

      // YES handler: show reveal overlay with typewriter + photo + celebration
      yesBtn.addEventListener('click', function(){
        yesBtn.disabled = true;
        yesBtn.textContent = 'üíñ Forever!';
        // close modal and open reveal
        closeMainModal();
        setTimeout(() => showReveal(), 260);
      });

      closeRevealBtn.addEventListener('click', hideReveal);

      // Reveal overlay logic
      function showReveal(){
        // prepare photo in reveal
        revealPhotoContainer.innerHTML = '';
        if (uploadedPhotoDataURL){
          const img = document.createElement('img');
          img.src = uploadedPhotoDataURL;
          img.alt = 'Celebration photo';
          img.style.width = '100%'; img.style.height = '100%'; img.style.objectFit = 'cover';
          revealPhotoContainer.appendChild(img);
        } else {
          // decorative heart if no photo
          revealPhotoContainer.innerHTML = `<svg viewBox="0 0 64 64" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M32 58s-22-12-22-28c0-8 6-14 14-14 5 0 8 3 8 3s3-3 8-3c8 0 14 6 14 14 0 16-22 28-22 28z" fill="url(#hgrad)"/><defs><linearGradient id="hgrad" x1="0" x2="1"><stop offset="0" stop-color="#ff6b8a"/><stop offset="1" stop-color="#ff9db7"/></linearGradient></defs></svg>`;
        }

        // set reveal texts and show overlay
        revealTitle.textContent = '';
        revealSub.textContent = '';
        reveal.setAttribute('aria-hidden','false');

        // animate ring slightly
        ringGraphic.classList.remove('burst');
        setTimeout(()=> ringGraphic.classList.add('burst'), 200);

        // initial celebration
        launchHearts(28);
        launchConfetti(36);

        // typewriter message (customize the message here)
        const message = "Yes ‚Äî a thousand times, yes.";
        const sub = "I promise to love you every day. Let's make forever our favorite place.";
        typeWriter(revealTitle, message, 40, () => {
          // after main typed, show subtext
          setTimeout(()=> typeWriter(revealSub, sub, 20), 380);
        });
      }

      function hideReveal(){
        reveal.setAttribute('aria-hidden','true');
        // small exit burst
        launchHearts(12);
      }

      // Typewriter: types into an element's textContent
      function typeWriter(el, text, delay = 50, cb){
        el.textContent = '';
        let i = 0;
        const t = setInterval(()=> {
          el.textContent += text[i++] || '';
          if (i > text.length) { clearInterval(t); if (cb) cb(); }
        }, delay);
      }

      /* FLOATING HEART CREATOR */
      function launchHearts(count = 20){
        for (let i=0;i<count;i++) createHeart();
      }
      function createHeart() {
        const svgns = "http://www.w3.org/2000/svg";
        const wrapper = document.createElement('div');
        wrapper.className = 'floating-heart';
        const size = rand(16, 46); // px
        const left = rand(8, 92); // vw
        const duration = rand(3600, 7600); // ms
        const delay = rand(0, 600); // ms
        const drift = rand(-120, 120); // px

        const svg = document.createElementNS(svgns, 'svg');
        svg.setAttribute('viewBox','0 0 32 29');
        svg.setAttribute('width', size);
        svg.setAttribute('height', size);
        svg.setAttribute('aria-hidden','true');

        const defs = document.createElementNS(svgns,'defs');
        const gid = 'g'+Math.floor(Math.random()*1000000);
        const grad = document.createElementNS(svgns,'linearGradient');
        grad.setAttribute('id', gid);
        grad.setAttribute('x1','0%'); grad.setAttribute('x2','100%');
        const stop1 = document.createElementNS(svgns,'stop'); stop1.setAttribute('offset','0%'); stop1.setAttribute('stop-color', randChoice(['#ff6b8a','#ff9db7','#ff4d6d','#ff7aa2']));
        const stop2 = document.createElementNS(svgns,'stop'); stop2.setAttribute('offset','100%'); stop2.setAttribute('stop-color', randChoice(['#ff9db7','#ff6b8a','#ff7aa2','#ff4d6d']));
        grad.appendChild(stop1); grad.appendChild(stop2);
        defs.appendChild(grad);
        svg.appendChild(defs);

        const path = document.createElementNS(svgns,'path');
        path.setAttribute('d','M23.6 0c-2.9 0-5.5 1.5-7.1 3.9C14.9 1.5 12.3 0 9.4 0 4.2 0 0 4.1 0 9.1c0 11 11.9 16.9 16 20 4.1-3.1 16-9 16-20C32 4.1 27.8 0 23.6 0z');
        path.setAttribute('fill', 'url(#'+gid+')');
        svg.appendChild(path);

        wrapper.appendChild(svg);
        document.body.appendChild(wrapper);

        wrapper.style.left = left + 'vw';
        wrapper.style.width = size + 'px';
        wrapper.style.height = size + 'px';
        wrapper.style.animation = `floatUp ${duration}ms cubic-bezier(.2,.8,.2,1) ${delay}ms forwards`;
        wrapper.style.transform = `translateX(${drift*0.0}px)`;

        setTimeout(()=> { try{ wrapper.remove(); } catch(e){} }, duration + delay + 300);
      }

      /* CONFETTI */
      function launchConfetti(count = 24){
        const colors = ['#ff4d6d','#ffb3c6','#ffd1dc','#ff7aa2','#fff58f','#ffd16b'];
        for (let i=0;i<count;i++){
          const el = document.createElement('div');
          el.className = 'confetti';
          const w = rand(7,12), h = rand(9,16);
          el.style.width = w + 'px';
          el.style.height = h + 'px';
          el.style.left = rand(10,90) + 'vw';
          el.style.background = randChoice(colors);
          el.style.borderRadius = (rand(0,40) > 28 ? '3px' : '0px');
          document.body.appendChild(el);

          const duration = rand(900,1700);
          const rotation = rand(180,1080);
          const horizontal = rand(-120,120);
          el.animate([
            { transform: `translateY(0px) rotate(0deg)`, opacity:1 },
            { transform: `translateY(-${rand(220,420)}vh) translateX(${horizontal}px) rotate(${rotation}deg)`, opacity:0 }
          ], {
            duration: duration + rand(0,800),
            easing: 'cubic-bezier(.2,.8,.2,1)',
            iterations: 1,
            delay: rand(0,300)
          });
          setTimeout(()=> { try{ el.remove(); } catch(e){} }, duration + 900);
        }
      }

      // util
      function rand(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }
      function randChoice(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

      // initial decoration
      window.addEventListener('load', () => { launchHearts(12); });

    })();
  </script>
</body>
</html>
